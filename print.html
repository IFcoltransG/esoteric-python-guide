<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Esoteric Python Guide</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="home.html">Home</a></li><li class="chapter-item expanded "><a href="whitespace.html"><strong aria-hidden="true">1.</strong> Whitespace</a></li><li class="chapter-item expanded "><a href="truthiness.html"><strong aria-hidden="true">2.</strong> Truthiness and Falsiness</a></li><li class="chapter-item expanded "><a href="circuits.html"><strong aria-hidden="true">3.</strong> Short Circuits</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Lambdas (Under Construction)</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Operators and Builtins (Under Construction)</div></li><li class="chapter-item expanded affix "><a href="credits.html">Credits</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Esoteric Python Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/IFcoltransG/esoteric-python-guide/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="home"><a class="header" href="#home">Home</a></h1>
<blockquote>
<p>When nothing remains, everything is equally possible.</p>
</blockquote>
<p>This guide hopes to take you from an intermediate Python programmer to a veritable Python McGyver, able to build anything out of practically nothing.</p>
<ol>
<li><a href="./whitespace.html">Whitespace</a></li>
<li><a href="./truthiness.html">Truthiness and Falsiness</a></li>
<li><a href="./circuits.html">Short Circuits</a></li>
</ol>
<p>Hosted from <a href="https://github.com/IFcoltransG/esoteric-python-guide">this repo.</a> Direct your blame <a href="./credits.html">here</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="whitespace"><a class="header" href="#whitespace">Whitespace</a></h1>
<blockquote>
<p>They'll tell you I'm insane, but I've got a blank space, baby, and I'll write your name.</p>
</blockquote>
<p>You've probably heard that Python has significant whitespace, but whitespace has special significance to any esoteric pythonista.</p>
<h2 id="indentation"><a class="header" href="#indentation">Indentation</a></h2>
<p>Unlike many programmers, Python won't fight you about whether you use tabs or spaces. If you replace all of the spaces and tabs in a Python file with each other, your code should still run. Using <code>·</code> for space and <code>↹</code> for tab, the following is valid Python:</p>
<pre><code class="language-python">if↹True:
·print(end=&quot;Hello&quot;)
·print(&quot;&quot;,↹&quot;World&quot;)
</code></pre>
<p>You can combine both in one indentation level, if you're careful to always use the same mix of spaces and tabs:</p>
<pre><code class="language-python">if True:
↹·↹·↹a = 1
↹·↹·↹if a &lt; 10:
↹·↹·↹···a = 10
↹·↹·↹···print(a)
</code></pre>
<p>However, the following will <em>not</em> work, because the order of the tab and space are different:</p>
<pre><code class="language-python">if True:
↹·a = 1
·↹b = 2 # IndentationError: unindent does not match any outer indentation level
</code></pre>
<h2 id="separators"><a class="header" href="#separators">Separators</a></h2>
<p>Python is lax with whitespace, letting you put it in strange places and leave it out in stranger ones. Whenever Python thinks it can unambiguously figure out where a token ends, you don't need whitespace following. For instance:</p>
<pre><code class="language-python">print(arg1,arg2,kwarg=kwarg)
for(a)in[1]:b=a
print(1and 2in[]) #keywords and variables can't begin with digits
foo=lambda*args:lambda arg,/:args+[arg]
</code></pre>
<p>This is a godsend for golfing. Never put spaces around your operators, and try to manoeuvre your terms so that any keywords are right next to punctuation. For instance, checking if a number is odd, <code>if 1-i%2:</code> can be <code>if~i%2:</code> instead.</p>
<h3 id="numbers"><a class="header" href="#numbers">Numbers</a></h3>
<p>Spaces can't go in numeric literals. Python views <code>1.__eq__</code> as <code>(1.) __eq__</code> or <code>(1.0) __eq__</code>, which is a syntax error. You can fix it with a space: <code>1 .__eq__</code> is the dunder method for <code>== 1</code> because <code>1 .</code> isn't a valid float literal.</p>
<p>If you want to put a space in a long number for readability, you're reading the wrong guide. However, <code>_</code> can be used instead, meaning <code>1_000_000</code> is a valid number.</p>
<h3 id="oddities"><a class="header" href="#oddities">Oddities</a></h3>
<p>Numbers can be extremely misleading: <code>[0x_for x in (1, 2, 3)]</code> evaluates to <code>[15]</code>. It startles enough people that Python 3.10 has deprecated this kind of syntax misuse.</p>
<details> <summary> <i> Expand for an explanation. </i> </summary> This means <code>[0xF or (x in (1, 2, 3))]</code>. <code>0x_f</code> is a hexadecimal integer literal, and F in hex equals 15 as a decimal. <code>o</code> isn't a hex digit, so Python doesn't lump <code>or</code> into the literal. (<code>15</code> is truthy, so using Boolean short circuiting, the <code>x in (1, 2, 3)</code> is never executed. That means <code>x</code> being undefined causes no error. The <code>15</code> is in a list literal rather than a list comprehension.) </details>
<h4 id="quasi-operators"><a class="header" href="#quasi-operators">Quasi-operators</a></h4>
<p>Whitespace can be a very confusing tool for things other than numbers. For instance, the so called 'pistol operator' or 'comma assignment' —</p>
<pre><code class="language-python">numbers = [42]
only_element ,= numbers
print(only_element) # 42
</code></pre>
<p>— is better rendered as <code>only_element, = numbers</code>, <code>(only_element,) = numbers</code>, or equivalently <code>[only_element] = numbers</code>. The last makes it clear that the pistol operator uses iterable unpacking and irresponsible whitespace to extract the only element of a list. The 'space-invader increment operator' <code>x -=- 1</code> is in a similar vein (parsing as <code>x -= -1</code>).</p>
<h2 id="semicolons"><a class="header" href="#semicolons">Semicolons</a></h2>
<p>Semicolons can be useful to avoid needing to type indentation characters; they act as a replacement newline for separating statements because Python and C are basically the same language.</p>
<pre><code class="language-python">while 2+2!=5: print(&quot;Try again.&quot;); break;
</code></pre>
<p>Both statements are part of the loop.</p>
<h2 id="practicalities"><a class="header" href="#practicalities">Practicalities</a></h2>
<p>—Whitespace is great, but what does it mean for golfing?</p>
<p>I'm glad you asked. If you have only one indentation level, put it all on the same line. <code>for x in y:a;b;c</code></p>
<p>If you have more than one of them, the outer indentation levels will need their own line. You don't need to use four spaces for each indent. A single space (or tab, you heathen!) will suffice.</p>
<pre><code class="language-python">if-1&gt;a:
 a
 b
 while c:
  try:d
  except:0
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="truthiness-and-falsiness"><a class="header" href="#truthiness-and-falsiness">Truthiness and Falsiness</a></h1>
<blockquote>
<p>What's true for you doesn't have to be true forever, and sometimes the truth isn't always for the better.</p>
</blockquote>
<p>Humanity has been trying to figure out the nature of truth for millennia. Philosophy tells us that some sentences are neither true nor false, such as this one. Fortunately, Python doesn't care what philosophers think.</p>
<h2 id="booleans"><a class="header" href="#booleans">Booleans</a></h2>
<p>Booleans start simple enough: they can either be <code>True</code> or <code>False</code>. In the same way that <code>1 + 1</code> equals <code>2</code>, <code>1 + 1 == 2</code> equals <code>True</code>. Python seems to respect mathematics more than philosophy, and there's a whole branch of algebra dedicated to combining <code>True</code> and <code>False</code> with the operators <code>and</code>, <code>or</code> and <code>not</code>. (An interesting coincidence: the mathematician who invented Boolean algebra, George Boole, was named after Booleans.)</p>
<p><code>and</code>, <code>not</code> and <code>or</code> are pretty intuitive, though <code>or</code> is inclusive, meaning <code>True or True</code> is <code>True</code>.</p>
<details> <summary> <i> Expand for the full truth table. </i> </summary>
Here is a lookup table for any <code>A</code> and any <code>B</code>.
<table>
  <tr>
    <th>A</th><th>B</th><th>not A</th><th>not B</th><th>A and B</th><th>A or B</th> </tr>
  <tr>
    <th>False</th><th>False</th><td>True</td><td>True</td><td>False</td><td>False</td> </tr>
  <tr>
    <th>False</th><th>True</th><td>True</td><td>False</td><td>False</td><td>True</td><tr>
    <th>True</th><th>False</th><td>False</td><td>True</td><td>False</td><td>True</td> </tr>
  <tr>
    <th>True</th><th>True</th><td>False</td><td>False</td><td>True</td><td>True</td> </tr>
  </tr>
</table>
</details>
<p>It is almost never necessary to write <code>x == True</code> or <code>x == False</code>. <code>x</code> and <code>not x</code> are cleaner, which may or may not be a good thing. You should also be careful when returning Booleans in <code>if</code> statements:</p>
<pre><code class="language-python">if x is True:
    return True
else:
    return False
# returns True when x is True, and False when x is False
</code></pre>
<p>You can simply write <code>return x</code>. You probably don't need to be warned that <code>not not</code> is pointless.</p>
<h3 id="weirder"><a class="header" href="#weirder">Weirder</a></h3>
<p>Perhaps you've noticed that Booleans look a lot like bits in binary. <code>False</code> seems like <code>0</code> and <code>True</code> like <code>1</code>. In fact, before Booleans were added, Python used <code>0</code> and <code>1</code> instead. This isn't just history trivia: Python still treats Booleans as numbers for backwards compatibility. Yes, that means <code>True + 1</code> is <code>2</code>. You can use a <code>bool</code> object any time you need an <code>int</code> <code>0</code> or <code>1</code>. This means you can write <code>not x</code> as <code>1&gt;x</code>, which is shorter and might cut out some whitespace around the expression.</p>
<h2 id="truthiness"><a class="header" href="#truthiness">Truthiness</a></h2>
<p>What happens when Python expects a Boolean, but you give it a small archipelago? Probably not an error.</p>
<p>Python treats everything, not just Booleans, as either 'truthy' or 'falsy' (sometimes 'falsey'). If you put something truthy in an <code>if</code> condition, it will run the block, but if it's falsy, the <code>else</code> block will run instead.</p>
<p>Obviously <code>True</code> is truthy, but every other object is also truthy by default. The exceptions are <code>None</code>, zero, empty collections and, unsurprisingly, <code>False</code>. The zeroes are <code>0</code>, <code>0.0</code> and <code>0j</code>. Empty collections include empty strings, empty lists, empty dictionaries, empty <code>frozenset</code>s, empty tuples... you get the idea.</p>
<pre><code class="language-python">numbers = [1, 2, 3, 4, 5]
# loop until list is empty
while numbers: # truthy if numbers has elements, falsy otherwise
    print(numbers.pop())

n = 10
# loop until n is 0
while n:
    n -= 1

# the str version is no different
</code></pre>
<p>This makes conversion between Booleans and integers entirely implicit. You can use a XOR designed for integers on Booleans if you want: <code>a ^ b</code>.</p>
<p><code>boolean&lt;1</code> might seem like a short way to negate a Boolean, but if can be even shorter if you are prepared to do some setup first. The <code>~</code> operator converts <code>0</code> to <code>-1</code> and <code>-1</code> to <code>0</code>, among other things. <code>-1</code> is not zero, so it's truthy. That means if you negate your Boolean beforehand (<code>f = -f</code>, turning <code>True</code> to <code>-1</code> and <code>False</code> to <code>0</code>) then you can simply use <code>~f</code> instead of <code>not f</code>.</p>
<h2 id="algebra"><a class="header" href="#algebra">Algebra</a></h2>
<p>Knowing Boolean algebra won't do you any harm but only one part is essential: De Morgan's Law. <code>(not a) or (not b)</code> is always equal to <code>not (a and b)</code>. Likewise, <code>(not a) and (not b)</code> is <code>not (a or b)</code>.</p>
<details> <summary> <i> Expand for another way of putting it. </i> </summary> You probably use De Morgan's Law every day. If you are not <i>rich and famous</i>, then you are either <i>not rich</i>, or <i>not famous</i>. If you are not <i>hungry or thirsty</i>, then you must be both <i>not hungry</i>, and <i>not thirsty</i>.
<p>
<p>
In other words, if you have a <code>not</code> outside an <code>and</code> or <code>or</code> expression, you can bring it inside of the expression by negating both operands <code>a</code> and <code>b</code>, then swapping <code>and</code> with <code>or</code>. Equivalently, you can negate both operands if you also negate the whole expression and swap the <code>and</code>/<code>or</code>. (Make sure you know where your brackets are, so you don't accidentally negate <code>a</code> rather than the whole expression.) Here's a demonstration that <code>not (A and B)</code> is <code>(not A) or (not B)</code>:
<table>
  <tr>
    <th>A</th><th>B</th><th>not A<br></th><th>not B<br></th><th>A and B<br></th><th>not (A and B)<br></th><th>(not A) or (not B)<br></th> </tr>
  <tr>
    <th>False</th><th>False</th><td>True</td><td>True</td><td>False</td><td>True</td><td>True</td> </tr>
  <tr>
    <th>False</th><th>True</th><td>True</td><td>False</td><td>False</td><td>True</td><td>True</td> </tr>
  <tr>
    <th>True</th><th>False</th><td>False</td><td>True</td><td>False</td><td>True</td><td>True</td> </tr>
  <tr>
    <th>True</th><th>True</th><td>False</td><td>False</td><td>True</td><td>False</td><td>False</td> </tr>
</table>
And here's <code>not (A or B)</code> is <code>(not A) and (not B)</code>:
<table>
  <tr>
    <th>A</th><th>B</th><th>not A<br></th><th>not B<br></th><th>A or B<br></th><th>not (A or B)<br></th><th>(not A) and (not B)<br></th> </tr>
  <tr>
    <th>False</th><th>False</th><td>True</td><td>True</td><td>False</td><td>True</td><td>True</td> </tr>
  <tr>
    <th>False</th><th>True</th><td>True</td><td>False</td><td>True</td><td>False</td><td>False</td> </tr>
  <tr>
    <th>True</th><th>False</th><td>False</td><td>True</td><td>True</td><td>False</td><td>False</td> </tr>
  <tr>
    <th>True</th><th>True</th><td>False</td><td>False</td><td>True</td><td>False</td><td>False</td> </tr>
</table>
</details>
<h2 id="pragmatism"><a class="header" href="#pragmatism">Pragmatism</a></h2>
<p>If you need to select an expression based on a Boolean, indexing <code>(a,b)[boolean]</code> is often shorter than an explicit <a href="./circuits.html#ternary-conditionals">ternary conditional</a> <code>b if boolean else a</code>. The problem with the former is that it will always evaluate both <code>a</code> and <code>b</code>. For example, <code>(print(&quot;a&quot;),print(&quot;b&quot;))[boolean]</code> will always print both <code>a</code> and <code>b</code>, so should be converted to <code>print((&quot;a&quot;,&quot;b&quot;)[boolean])</code>  or <code>print(&quot;ab&quot;[boolean])</code> to print only one of the two. (Many other situations can be shortened using short-circuiting.)</p>
<p>If you need to convert a Boolean to lowercase text <code>&quot;true&quot;</code>/<code>&quot;false&quot;</code>, you can interleave the two strings and use a slice, saving on quote marks. <code>&quot;ftarlusee&quot;[boolean::2]</code> takes every second character, starting at either <code>0</code> or <code>1</code> depending, so will suffice. The trick works for any pair of strings that are the same length, or if there's one extra character for the <code>False</code> option.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="short-circuits"><a class="header" href="#short-circuits">Short Circuits</a></h1>
<blockquote>
<p>&quot;Oh dear,&quot; says God, &quot;I hadn't thought of that,&quot; and promptly vanishes in a puff of logic.</p>
</blockquote>
<p>Programming is sometimes called the art of laziness, but Python has laziness down to a science.</p>
<h2 id="ternary-conditionals"><a class="header" href="#ternary-conditionals">Ternary conditionals</a></h2>
<p>Imagine you are a Python coder. Just imagine it. If you <em>are</em> a Python programmer, this won't be particularly difficult. You might be able to imagine yourself coding an <code>if</code> statement.</p>
<pre><code class="language-py">if condition:
    x = func()
else:
    x = 0
</code></pre>
<p>This can be shortened to one line using Python's handy-dandy ternary conditional syntax:</p>
<pre><code class="language-py">x = func() if condition else 0
</code></pre>
<p>The syntax for <code>t if c else f</code> should be mostly self-explanatory, and it's an expression so it can be used in more positions than the traditional <code>if:</code>/<code>else:</code>. (The trade-off is that you can only put expressions in it, rather than full statements, but that is rarely a problem.)</p>
<pre><code class="language-py">print(f&quot;You're {'quite'if...else'not'} correct!&quot;)
# prints &quot;You're quite correct!&quot;
</code></pre>
<h2 id="and-andor-or"><a class="header" href="#and-andor-or"><code>and</code> and/or <code>or</code></a></h2>
<p>A little secret: most of the time, ternary conditionals are not necessary. We've <a href="./truthiness.html">seen</a> that Python has Boolean operators.</p>
<pre><code class="language-py">a | b # a OR b
a &amp; b # a AND b
a ^ b # a XOR b
~a # NOT a
</code></pre>
<p>Hold on, those aren't the operators from the previous page. They're bitwise operators, not Boolean. They shouldn't be here right now. Maybe if you ignore them they'll go away.</p>
<pre><code class="language-py">a or b
a and b
a != b
not a
</code></pre>
<p>That's better. Now then, these Boolean operators are capable of emulating <code>if</code> and <code>else</code>, because of an optimisation called 'short-circuiting'. (The bitwise operators don't have that power.)</p>
<h3 id="short-circuiting"><a class="header" href="#short-circuiting">Short circuiting</a></h3>
<p>Look at an expression like <code>True or foo()</code>. <code>foo</code> might return <code>True</code> or <code>False</code>, but it doesn't matter which, because <code>True</code> <code>or</code> <em>anything</em> is always truthy. There's really no need to run <code>foo</code>. Python realises this information, and will instantly return <code>True</code> when it sees a <code>True</code> on the left of an <code>or</code>. Similarly, <code>False and foo()</code> is always <code>False</code>, so Python won't bother running <code>foo</code>.</p>
<p>(If you like, you can confirm this with the <a href="./truthiness.html#booleans">truth table</a>.)</p>
<p>In fact, <code>a or b</code> is like a shorter version of <code>a if a else b</code>, and <code>a and b</code> is like <code>a if not a else b</code>. (A slight difference: <code>foo() or b</code> calls <code>foo</code> once, while <code>foo() if foo() else b</code> might double up on calls.) After staring at that notation, you might be wondering what happens with values that aren't <code>True</code> or <code>False</code>.</p>
<pre><code class="language-py">1 or 0/0
# = 1 (doesn't raise `ZeroDivisionError`)

&quot;&quot; and print(&quot;something&quot;)
# = &quot;&quot; (doesn't print anything)

print(&quot;a&quot;) or &quot;b&quot;
# = 'b' (prints 'a' as well)
</code></pre>
<p>As you can see, it doesn't need to return Booleans.</p>
<p>That last example has practical merit. The <code>print</code> function, along with many other functions and methods that have side effects, returns <code>None</code>, which is falsy. That allows you to chain operations together: <code>my_list.append(number) or print(my_list) or number</code> is an expression. It evaluates to <code>number</code>, but it also appends <code>number</code> to a list and prints out that list.</p>
<p>If you know that <code>a()</code> always evaluates to something falsy, you can emulate <code>b() if c else a()</code> using <code>(c or a()) and b()</code>. It may not be any shorter, but it can often suggest other shortenings.</p>
<p>For instance, let's say you need the result of a function, except some of the time it returns a falsy value (<code>None</code>, <code>0</code>, <code>&quot;&quot;</code> etc), and you need to replace those falsy return values with a default.</p>
<pre><code class="language-py">line = fizz_or_buzz(n) if fizz_or_buzz(n) != &quot;&quot; else str(n)
# equivalently:
line = fizz_or_buzz(n) or str(n)
</code></pre>
<h3 id="chained-comparisons"><a class="header" href="#chained-comparisons">Chained comparisons</a></h3>
<p>Python automatically inserts the Boolean operator <code>and</code> into certain expressions.</p>
<pre><code class="language-py">if 0 &lt;= a &lt; 10:
    print(&quot;in range&quot;)

# equivalent to:
if 0 &lt;= a and a &lt; 10:
    print(&quot;in range&quot;)
</code></pre>
<p>(Oh, alright. They're not quite equivalent, just like how Boolean operators aren't quite the same as ternary conditionals. The middle term is only evaluated once in a chained comparison, so <code>0 &lt;= foo() &lt; 10</code> would call <code>foo</code> once but <code>0 &lt;= foo() and foo() &lt; 10</code> would call it twice.)</p>
<pre><code class="language-py">print(1 &lt; 10 &lt; 100 &lt; 1000 &lt; 10000)
# True

print(1 &lt; 2 &gt; 3)
# False

print(1000 &lt; 42 &lt;= 0/0)
# False (doesn't raise ZeroDivisionError because of Boolean short circuiting)
</code></pre>
<p>The comparison operators in Python are:</p>
<ul>
<li><code>&lt;</code> and <code>&gt;</code></li>
<li><code>==</code> and<code>!=</code></li>
<li><code>&lt;=</code> and <code>&gt;=</code></li>
<li><code>is</code> and <code>is not</code></li>
<li><code>in</code> and <code>not in</code></li>
</ul>
<p>You can write <code>3 in (1, 2, 3) &lt; (1, 2, 4) &gt; (1, 2) not in [] != 1 is 1</code>, which is truthy. For extra fun, it will raise a <code>SyntaxWarning</code>.</p>
<h2 id="precedence"><a class="header" href="#precedence">Precedence</a></h2>
<p>Python isn't a Lisp, so there's no reason to use extra brackets. If you keep in mind operator precedence, you can avoid adding redundant ones.</p>
<p>It can be easier to commit lists to memory with an explanation why they are in the order they are. You have probably seen that Python uses BEDMAS/PEMDAS/BODMAS/BIDMAS ordering, which means <code>a + (b * c)</code> is just <code>a + b * c</code>—Python always does the <code>*</code> before the <code>+</code>. None of these mnemonics have a letter for &quot;Boolean AND&quot; or &quot;unary inverse&quot; or &quot;modulo&quot;, so it's just a skeleton of Python's operators.</p>
<p>If you'd like to follow along, there's a concise reference version in <a href="https://docs.python.org/3/reference/expressions.html#operator-precedence">the Python docs</a>.</p>
<h3 id="bp"><a class="header" href="#bp">B/P</a></h3>
<ul>
<li>
<p>First in the acronym is 'B' for 'brackets', because <code>(...)</code> is always the tightest grouping. Never can anything inside <code>(...)</code> pair itself with anything outside the brackets. This also goes for square brackets <code>[...]</code> and squiggly brackets <code>{...}</code>.</p>
</li>
<li>
<p>After that, there's another use of brackets, which is calling functions <code>foo(...)</code> and indexing lists <code>foo[...]</code>. Attribute access is also at this level of precedence <code>foo.bar</code>.</p>
</li>
<li>
<p>Next is the <code>await</code> keyword. It's looser than the above, so <code>await lib.load(&quot;utf-8&quot;)</code> is <code>await ( ( lib.load )(&quot;utf-8&quot;) )</code>.</p>
<p>The operators so far have all operated on one value. In <code>foo()</code>, the <code>()</code> operates on just <code>foo</code>, whereas <code>foo + bar</code>, which comes later in the precedence chart, has <code>+</code> combining both <code>foo</code> and <code>bar</code> together. As a general rule, the single-value operations (like <code>await</code>) bind tighter than the two-value operators.</p>
</li>
</ul>
<h3 id="eo"><a class="header" href="#eo">E/O</a></h3>
<ul>
<li>
<p>Every general rule has an exception, and exponentiation <code>**</code> is the exception to that one. It binds tighter than <code>-foo</code>, <code>~foo</code> and <code>+foo</code>, even though they're single-value operators and <code>a ** b</code> takes two values.</p>
<p>It's also an exception to another rule: it's 'right-associative' rather than left-associative. That's another way of saying that Python treats <code>a ** b ** c ** d</code> as <code>a ** (b ** (c**d))</code>, which is the opposite order to every other two-valued operator. For instance, <code>a * b * c * d</code> turns into <code>((a*b) * c) * d</code>. Exponentiation probably gets its right-associativity from mathematical notation, where a power law, (a<sup>b</sup>)<sup>c</sup> = a<sup>b×c</sup>, makes left-associative exponents pointless.</p>
</li>
<li>
<p>Of course next are <code>-foo</code>, <code>~foo</code>, <code>+foo</code>. (These are not their two-value forms: <code>+foo</code> is a different operator to <code>foo + bar</code>.) If you've ever typed <code>-1**2</code> into Google and got confused why it's <code>-1</code> rather than <code>(-1)**2</code> = <code>1</code>, this is why.</p>
</li>
</ul>
<h3 id="dm"><a class="header" href="#dm">D/M</a></h3>
<ul>
<li>We're up to the 'D' and 'M' for division and multiplication. Python treats <code>*</code>, <code>@</code>, <code>/</code>, <code>//</code> and <code>%</code> as forms of multiplication and division, so they all have the same precedence.</li>
</ul>
<h3 id="as"><a class="header" href="#as">A/S</a></h3>
<ul>
<li>'A' and 'S'—adding and subtracting—are uncomplicated. <code>foo + bar</code> and <code>foo - bar</code> are the loosest operators yet.</li>
</ul>
<h3 id="bitwise"><a class="header" href="#bitwise">Bitwise</a></h3>
<ul>
<li>
<p>The mnemonics end here, and this is the point where primary school students would stop learning and go outside. They didn't have to learn about bitwise operations, starting with left-shift <code>&lt;&lt;</code> and right-shift <code>&gt;&gt;</code>. The shifts are at this precedence because they're often used to prepare values for the other bitwise operators.</p>
</li>
<li>
<p>After that are <code>&amp;</code>, <code>^</code> and <code>|</code>, in that order. The reason <code>&amp;</code> (<em>bitwise AND</em>) and <code>|</code> (<em>bitwise OR</em>) go in this order, is that mathematicians think of <code>&amp;</code> and <code>|</code> as a lot like <code>*</code> and <code>+</code>, respectively—that's why <code>a * b</code> gives you the same Boolean as <code>a &amp; b</code> if (<code>a</code> and <code>b</code> are Booleans) and <code>bool(a + b)</code> gives you the same as <code>a | b</code>.</p>
<p>So to keep the mathematicians happy, <code>a | b &amp; c</code> has analogous operator precedence to <code>a + b * c</code>: it's <code>a | (b &amp; c)</code>. (For some reason <em>bitwise XOR</em> <code>^</code> is put between these operators' precedence.)</p>
</li>
</ul>
<h3 id="boolean"><a class="header" href="#boolean">Boolean</a></h3>
<ul>
<li>
<p>You've already had a look at the comparison operators. They all go here. That's why <code>a + b &gt;= c</code> doesn't accidentally parse as <code>a + (b &gt;= c)</code> which would be less intuitive than <code>(a + b) &gt;= c</code>. Python combines all of the numerical and string operations at a tighter precedence than Booleans, because lots of Boolean expressions have numerical operations like addition inside them.</p>
</li>
<li>
<p>Intuition says that <code>a &gt;= b or b &gt;= c</code> should parse as <code>(a &gt;= b) or (a &gt;= c)</code>, so the Boolean operators go next. The first Boolean operator is the one-valued Boolean operator, <code>not a</code>, because operations on a single value come before operations on two values. Then the two-valued operators, <code>a and b</code> and <code>a or b</code>. Just like <code>&amp;</code> and <code>|</code>, <code>and</code> binds more tightly than <code>or</code> does.</p>
</li>
<li>
<p>What does Python expect you to do with Booleans?</p>
<p>—Use them in an <code>if</code>/<code>else</code>!</p>
<p>So <code>a if b else c</code> has to be looser than everything else so far.</p>
<p>Did you know that 'ternary' in &quot;ternary conditional&quot; means &quot;three-valued,&quot; because it takes an <code>a</code>, a <code>b</code> and a <code>c</code>? Given the pattern of single-valued operators before double-, it fits that a three-valued operator should go after all the other Boolean operations.</p>
</li>
</ul>
<h3 id="beyond"><a class="header" href="#beyond">Beyond</a></h3>
<ul>
<li>The penultimate on the list is <code>lambda ...: foo</code>, which is designed so that almost any expression can go on its right-hand-side.</li>
<li>The only expression you can't put on the right of a lambda is anything using walrus assignment, <code>:=</code>, because Python thought that would be useless.</li>
</ul>
<p>Phew! That's all of them.</p>
<pre><code class="language-py"># Where might the brackets for this go then?
(f := lambda: 0 if 4 &amp; -foo.bar()[1 ** 2 ** 3] + 1 % 2 &gt;&gt; 3 and 3 != 3 ^ 2 or False else baz)
</code></pre>
<details> <summary> <i> Expand for an answer. </i> </summary> It should be something like <code>f := (lambda: (0 if ((4 & (((-(((foo.bar)())[1 ** (2 ** 3)])) + (1 % 2)) >> 3) and (3 != (3 ^ 2))) or False) else baz))</code> </details>
<p>Every so often you can use these precedence rules to shave off a few brackets. It helps to keep them with you always. Post-it them to the back of your laptop. Tattoo them on your wrist. Whisper them as you fall asleep.</p>
<h2 id="golfers-corner"><a class="header" href="#golfers-corner">Golfer's corner</a></h2>
<p>Aren't Boolean operators nice? So much statelier than the bitwise operators, you may well find.</p>
<p>They are lazy though, it must be said. <code>and</code> is most useful for giving up. If your data processing only makes sense on truthy values, <code>and</code> will let you pass falsy ones through unprocessed. Though, as you've seen, <code>and</code> is not as short as <code>&amp;</code> for comparing real Booleans, no matter how painful to admit.</p>
<p><code>and</code> might be better than <code>&amp;</code> if you need the implicit Boolean conversions, when you want to return an arbitrary object, for its short-circuiting behaviour, or if it has a helpful precedence that lets you trim brackets.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="credits"><a class="header" href="#credits">Credits</a></h1>
<p>Most of this: <a href="https://github.com/IFcoltransG">IFcoltransG</a>.</p>
<p>Inspiration: <code>#esoteric-python</code> in the <a href="https://discord.gg/python">Python Discord</a>, plus <a href="https://codegolf.stackexchange.com/q/54">Tips for golfing in Python</a>, and <a href="learnyouahaskell.com">Learn You a Haskell</a>.</p>
<h2 id="quotes"><a class="header" href="#quotes">Quotes</a></h2>
<ul>
<li><strong>Main page</strong>: a Pythonista on the <code>#esoteric-python</code> channel.</li>
<li><strong>Home</strong>: One With Nothing.</li>
<li><strong>Whitespace</strong>: Blank Space by Taylor Swift.</li>
<li><strong>Truthiness</strong>: The Truth from the 36 Questions soundtrack.</li>
<li><strong>Short circuits</strong>: The Hitchhikers Guide to the Galaxy by Douglas Adams.</li>
<li><strong>Lambdas</strong>: generic template.</li>
<li><strong>Operators and Builtins</strong>: Batman (1967).</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
